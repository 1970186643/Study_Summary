## 今日份学习

- promise
三种状态  fulfilled(已完成) pending(进行中) rejected(失败)
+ 如果参数不是promise对象，就会使用Promise.resolve方法转换为promise对象
  1. promise.all  接收一个promise数组作为参数
  分两种情况：
    1. 数组里的每个promise实例都变成fulfilled，返回值为整个数组的状态
    2. 数组里的有一个promise实例变成rejected，返回值为第一个rejected的promise实例

  2. promise.race  接收一个promise数组作为参数
    只要数组中的一项率先改变状态，整个状态就会被改变，返回值则为率先改变状态的promise的返回值
  
  3. promise.finally
    不管指定promise对象最后的状态如何，都会执行 .then .catch方法(本质上是一个特例)
  
+ 回调地狱
  嵌套了多层的回调函数，有大量的  )}  结尾的代码，造成代码的可读性差，可维护性差的代码，为回调地狱
  本质上还是代码的书写规范不正确

  修复回调地狱
  1. 减少代码的嵌套
    多层的代码嵌套会造成大量的代码冗余，可读性，可维护性差
  2. 使用模块化
    将复杂的代码进行代码拆分，做成多个模块
  3. 减少使用匿名函数
    具名函数无论是可读性还是可维护性上都更优秀，代码出错能精准定位错在哪个函数


- 事件委托
  将一个元素的响应事件的函数委托到另一个元素上
  通俗的讲就是不在事件的直接DOM上设置监听函数，而在其父元素或其他元素上
  然后通过事件的冒泡机制，父元素可以监听子元素的事件响应，从而发生不同的响应
  优点：
  1. 减少内存消耗，提高性能
    一个ul标签下有多个li标签如果都绑定同一个时间的话，如果每个li标签都绑定事件，会造成性能的浪费，最直接的就是在父元素ul标签下绑定事件，然后判断哪个事件发生了改变
  2. 适合动态绑定元素
    在一个ul标签下动态的增加或者删除DOM的话，都要为每一个DOM上的事件进行解绑和绑定，使用了事件委托的话，就不需要，最外层父元素已经实现

- new的四步骤
1. 创建一个新的对象
2. 将构造函数的作用域(this绑定)赋给新对象
3. 执行构造函数的代码(为这个新对象添加属性)
4. 返回这个新对象

- 深拷贝和浅拷贝
基本数据类型：Number, String, Bolean, Null, undefined, Symbol 在内存中固定大小，保存在栈内存中
引用类型： Object, Array, Data, Function, RegExp  引用类型的值是对象，保存在堆内存中，而栈内存存储的是对象的变量标识符以及对象在堆内存中的存储地址

+ 结论：  简单的数据放在栈内存(更小)中，而复杂的数据值放在堆内存(更多大)中，而堆内存存储的是这个复杂对象的变量名和在堆内存的存储地址

需要从栈内存和堆内存讲起，

基本数据类型的复制，就是创建一个新变量，将这个值放入这个新变量中
引用类型的复制，只是复制了这个指针，指向了这个值的地址，如果一方改变其值，另一方的值也会发生改变


- 浅拷贝
  仅仅是复制了引用，彼此之间的操作会互相影响(比如引用类型数据的复制，会互相影响)

- 深拷贝
  在堆内存重新分配了值的地址，不同的地址，相同的地址，互不影响

- 跨域
  浏览器同源策略的限制，浏览器限制访问

  1. JSONP跨域(只能解决get请求)    兼容性好
     原理：动态创建一个script标签。利用srcipt标签的src属性不受同源策略的限制，可以请求第三方资源的内容

  2. CORS跨域
  CORS实现起来非常方便，只需增加一些HTTP响应头之后，浏览器将会允许跨域请求

  3. postMessage方法

- 懒加载
  长网页延长加载图片资源，不需要一次性将图片加载出来，等用户滑倒那一栏之前，可视区域的图片不会加载图像，是一种性能优化的的方式。
  原理：
    1. 图片的src属性设为空字符串，而图片的真实路径放在另一个变量(data-src)中，在通过页面滚动事件去监听用户的滚动，判断用户是否进入我们的可视区域内，如果进入了把data-src中的路径放入src中
    2. 雪碧图的使用
  优点：
    1. 客户端优化，减少请求数和延迟请求数。(不需要每个用户都将整个页面的数据进行请求)
    2. 提高用户体验。(网页不需要一次加载出来，页面加载出来更快，用户体验更好)
    3. 减少无效资源的加载。(减少了服务器的压力和流量，也能减少浏览器的压力)
    4. 防止并发加载的资源过多会阻塞js的加载，影响网站的正常使用

- 预加载
  提前加载图片，当用户需要查看是可以直接从本地缓存中渲染
  原理：
    1. 在网页加载之前，对一些主要内容进行加载，以提供用户更好的体验，减少等待时间，减少白屏时间
    2.  

- 节流和防抖
  - 节流
    原理：在一段时间内多次触发事件的话，但是他只会在一定时间触发一次
  - 防抖
    原理： 在一段时间内只能触发一次时间，如果在这段时间内又触发了，则会重新计算执行时间

- 函数柯里化
  把接收多个参数的函数转变为接收一个单一参数的

### React
  - 声明式编程 (应该做什么)
  - 命令式编程 (应该如何做)
  - 函数式编程  (有利于自动化测试，只要测试每一个函数的输入输出是否正确。)
    + 声明式编程的一部分
  1. 不可变性。
    函数式编程里，你无法更改数据，也不能，只能深拷贝一个副本，然后返回这个新对象
  2. 纯函数
    输入固定的值只会有固定的输出，没用副作用
  3. 数据转换
  4. 高阶函数
    将函数作为参数的函数或返回函数的函数

  - 受控组件
  是React处理表单的一种技术


### Styled-components
  优点：
  1. 符合React的写法，把css写入组件中，对组件的维护都是有效的
  2. 样式写在js中，降低了js对文件的依赖
  3. css in js的思想，可以在css定义变量，更加灵活
  4. 避免了样式间的冲突，避免样式间的污染 

  