## 说一说从输入URL到页面呈现发生了什么？

### 首先是网络层
1. 当我们在浏览器输入框输入一个网址，浏览器会首先构建一个请求行
2. 然后会检查一下强缓存，如果有，会直接使用。
3. DNS解析，浏览器会对输入的网址解析成IP地址
4. 接下来就是利用IP地址与服务器建立TCP连接，中间又分为：
  - 通过三次握手建立客户端与服务端的连接
  - TCP建立连接后就可以进行数据传输，**数据传输是把大的数据包拆成一个个小包进行传输，浏览器接收后在把他们一个个拼接起来**
  中间是进行了HTPP请求，浏览器发送HTTP请求，请求自己需要的数据
  - 传输完成后，通过四次挥手与服务器断开连接
5. 网络传输完成后，就会通知渲染进程开始干活了
### 接下来是渲染层
渲染过程又分为了几个步骤: 构建DOM树，构建渲染树，布局渲染树，绘制渲染树
1. 构建DOM树：浏览器对直接传过来的HTML代码是无法解析的，首先会解析成他能理解的DOM树
2. 构建渲染树：解析css样式，并加载引入的css代码，把解析DOM树和CSS进行合并，生成Render树
3. 布局渲染树：从根节点递归调用，计算每一个元素的大小，位置等。让他们能够精准的显示在浏览器中
4. 绘制渲染树：遍历渲染树，浏览器绘制每一个节点。

## 重绘与重排(回流)
### 重绘
- 什么是重绘
当我们修改样式的时候，却没有影响到DOM的几何属性，浏览器不需要重新计算元素的属性，直接可以进行绘制的过程叫做重绘
❗ 过程：1. 修改CSS样式，更新渲染树(因为没有影响到元素的几何属性，就不需要重新计算布局) -> 2. 重新绘制
### 重排
- 什么是重排？
当我们的操作引起DOM的几何尺寸发生了变化，旁边的DOM也会受到影响，导致浏览器需要重新计算元素的几何属性，然后对重新计算的DOM绘制出来，这个过程就叫做重排。

❗ 过程：1. 会修改CSS样式，更新生成的渲染树 -> 2. 重新计算布局 -> 3. 重新在浏览器进行绘制
- 触发重排的条件
1. 一个DOM的几何属性发生变化，比如width，height，padding等等
2. DOM节点发生增减或移动的时候
3. **读写**(必须是读写，单纯的读不会)了offset族，scroll族，client族的属性的时候，浏览器为了获得这些值，会进行回流操作。
4. 调用 window.getComputedStyle 方法。


### 总结
重绘不一定重排，但是重排一定会重绘
1. 避免频繁的使用style，而是采用class的方式。
2. 对于scroll，resize等操作使用防抖/节流操作
3. 使用createDocumentFragment进行批量的 DOM 操作。
4. 在必要的时候把元素提升为单独的图层，使用 will-change: transform;、translate3d等。当提升为一个单独的图层，发生变换的时候直接进行合成的步骤。