## JS内存机制

## JS内存生命周期
JS没有暴露任何内存操作给开发者，而是自己默默的完成了所有的内存管理。
JS 的内存生命周期，和大多数程序语言一样，分为三个阶段。
1. 分配内存(挖坑)
2. 内存的读写操作(用坑)
3. 释放内存(填坑)

重点: 释放内存(垃圾回收机制)
垃圾回收: 每隔一段时间，js的垃圾回收机制就会对变量进行“巡检”,判断变量在后续是否不会再用了，他就会把这个变量所占的内存空间释放掉，这个过程就是垃圾回收机制。

- 垃圾回收算法 ———————— 引用计数法和标记清除法。
1. 引用技数法
**该技术已经别大多数浏览器抛弃了。**
```js
function badCycle() {
  var cycleObj1 = {}
  var cycleObj2 = {}
  cycleObj1.target = cycleObj2
  cycleObj2.target = cycleObj1
}
badCycle()
```
缺点：（引用计数法无法甄别循环引用场景下的 “垃圾”！）当我们对两个对象的值互相引用赋值的时候，他无法判断他们是否还在用这个变量，就无法进行垃圾回收。

2. 标记清除法————判断变量是否**可抵达**
这个算法有两个阶段，分别为标记阶段和清除阶段。
  - 标记阶段：垃圾收集器会从根对象出发，扫描所有可以通过跟对象触及的变量，这些对象会被标记成为("可抵达")
  - 清除阶段：没有别标记为"可抵达"的变量，就会被认为是不需要用到的变量，这些变量会被清除。

### 内存泄漏和内存溢出
1. 内存泄露：在释放内存的时候，该释放的内存没有被释放。内存泄漏堆积的后果非常严重。
  - 手滑导致全局的变量
  - 忘记清除的setInterval和setTimeout
    定时器的工作可以说是无穷无尽的，如果不清楚，他会一直占用内存。
  - 
2. 内存溢出：在分配内存的时候，分配的内存不足以存放数据。

