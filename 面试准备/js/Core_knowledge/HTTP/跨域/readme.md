##  跨域解决方案
### 同源策略
同源策略的同源指的是协议，域名，端口相同是一个安全策略，在没有授权下，只能本域名下接口交互,不能读写对方资源。
**读写对方资源**主要限制为：
1. Cookie、LocalStorage 和 IndexDB 无法读取
2. DOM 和 JS 对象无法获取
3. Ajax请求发送不出去、

### JSONP
利用<script>标签不受同源策略限制的影响。通过动态创建script，在请求一个带参网址实现跨域通信
- 实现流程：
1. 声明一个回调函数，将回调函数名作为参数传递给跨域请求的服务器，函数形参为要获取的数据(服务器端返回的数据)
2. 创建一个 script 标签，跨域请求地址作为 script 标签的 src 属性值
3. 服务器收到请求后取出参数和回调函数名，将相应的数据作为回调函数的参数并返回给客户端调用回调函数
- 优点
1. 实现简单
2. 兼容性好
- 缺点
1. 只支持get请求方式(script标签只支持get方法)
2. 有安全性问题(容易受XSS攻击)
3. 需要服务端配合 JSONP 进行一定程度的改造

### CORS
CORS是一个W3C标准，全程是跨域资源共享
<!-- 它使用额为的HTTP头来告诉浏览器，让运行在一个origin上的web应用被准许访问来自不同源服务器上的指定的资源。 -->
能否实现CORS的关键在于服务器能否对此提供支持。
**服务端设置 Access-Control-Allow-Origin 就可以开启 CORS**
浏览器会把请求分为简单请求和非简单请求  
- 简单请求
满足下面的方式是简单请求
1. 请求方式为HEAD、POST 或者 GET
2. http头信息不超出一下字段：Accept、Accept-Language 、 Content-Language、 Last-Event-ID、 Content-Type

满足这两个条件的，就是简单请求。对于简单请求，对于简单请求，浏览器直接发出CORS请求。具体来说，就是在头信息之中，增加一个Origin字段：
```html
Origin: http://imooc.com
```
服务器根据这个字段，决定是否同于跨域。
1. 同意的话证明在许可范围内，就会多出一个关键的字段 Access-Control-Allow-Origin，运行跨域
2. 不同意的话，会抛出错误。

- 复杂请求

不满足上面简单请求的就是复杂请求
复杂请求跨域在正式通信前会先发送一个 OPTIONS 请求 --- "预检"请求，确认服务器是否允许跨域请求。
确认当前网页所在的域名是否在服务器的许可名单之中、明确可以使用的 HTTP 请求方法和头信息字段。只有在这个请求返回成功的情况下，浏览器才会发出正式的请求。

### CORS 和 JSONP 的对比
CORS 的优势，往往是相对于 JSONP 来说的：JSONP只支持GET请求，而CORS支持所有类型的HTTP请求。但相应地，JSONP在低版本 IE 上也可以畅通无阻，CORS 就没有这么好的兼容性了。

## postMessage
postMessage 是 HTML5 XMLHttRequest Level 2 中的 API，允许来自不同源的脚本采用异步方式进行有限的通信，可以实现跨文本档、多窗口、跨域消息传递

## Nginx 反向代理
即所有客户端的请求都必须先经过 nginx 的处理，nginx 作为代理服务器再讲请求转发给 node 或者 java 服务，这样就规避了同源策略

